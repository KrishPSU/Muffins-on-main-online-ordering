<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Menu</title>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script src="/socket.io/socket.io.js"></script>

  <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/header.css" />
  <link rel="stylesheet" href="./css/modal.css" />

  <script defer src="./js/edit-menu.js"></script>
  <script defer src="./js/buttons.js"></script>
  <script defer src="./js/update.js"></script>

</head>
<body>
  

  <div class="wrapper">
    <h1>Edit Menu 
      <button id="reload-menu-btn">Reload &#x21bb;</button>
    </h1>
    <div class="header">
      <div class="header-input-wrapper">
        <input type="text" id="searchInput" placeholder="Search items..." autocomplete="off">
        <select id="categorySelect">
          <option value="all">All Categories</option>
        </select>
      </div>
      <button id="create-new-item">Add Item &#43;</button>
    </div>
    <div id="menuContainer">
      Loading menu items...
    </div>
  </div>


  <div id="itemModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModalBtn">&times;</span>
      <h2>Add New Menu Item</h2>
      <form id="itemForm">
        <label>
          Name:<br>
          <input type="text" name="name" required>
        </label><br><br>

        <label>
          Description: <span class="desc-char-limit" id="add-item-desc-char-limit">(0/60)</span><br>
          <textarea id="add-item-desc-textarea" name="description" rows="2" maxlength="60"></textarea>
        </label><br><br>

        <label>
          Price:<br>
          <input type="number" name="price" min="0" step="0.01" required>
        </label><br><br>

        <label>
          Category:<br>
          <input type="text" name="category" required>
        </label><br><br>

        <label>
          Image:<br>
          <div class="image-upload-container">
            <input type="file" name="image" id="itemImage" accept="image/avif" class="image-input">
            <label for="itemImage" class="image-upload-btn">
              <span class="upload-icon">ðŸ“·</span>
              <span class="upload-text">Choose Image</span>
            </label>
            <div class="selected-file-info" id="selectedFileInfo"></div>
          </div>
        </label><br><br>

        <label id="modal-hidden-toggle-element">
          Hidden: 
          <input type="checkbox" name="hidden">
        </label><br><br>

        <button type="submit">Submit</button>
      </form>
    </div>
  </div>




  <div id="editItemModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeEditModalBtn">&times;</span>
      <h2>Edit Menu Item</h2>
      <form id="editItemForm">
        <label>
          Name:<br>
          <input type="text" name="name" required>
        </label><br><br>

        <label>
          Description: <span class="desc-char-limit" id="edit-item-desc-char-limit">(0/60)</span><br>
          <textarea id="edit-item-desc-textarea" name="description" rows="2" maxlength="60"></textarea>
        </label><br><br>

        <label>
          Price:<br>
          <input type="number" name="price" min="0" step="0.01" required>
        </label><br><br>

        <label>
          Category:<br>
          <input type="text" name="category" required>
        </label><br><br>

        <label>
          Image:<br>
          <div class="image-upload-container">
            <input type="file" name="image" id="editItemImage" accept="image/avif" class="image-input">
            <label for="editItemImage" class="image-upload-btn">
              <span class="upload-icon">ðŸ“·</span>
              <span class="upload-text">Choose Image</span>
            </label>
            <div class="selected-file-info" id="editSelectedFileInfo"></div>
          </div>
        </label><br><br>

        <label id="modal-hidden-toggle-element">
          Hidden: 
          <input type="checkbox" name="hidden">
        </label><br><br>

        <div class="bottom-buttons">
          <button id="cancel-edit-btn" class="cancel">Cancel</button>
          <button type="submit" class="save">Save</button>
        </div>
      </form>
    </div>
  </div>



  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <h2>Are you sure?</h2>
      <p>This action cannot be undone. Do you want to delete <span id="item-to-delete-text"></span>?</p>
      <div class="modal-actions">
        <button id="confirm-delete-btn" class="danger">Delete</button>
        <button id="cancel-delete-btn">Cancel</button>
      </div>
    </div>
  </div>



  <div class="view-image-modal">
    <div class="view-image-dialog" role="dialog">
      <div class="view-image-modal-top">
        <p id="view-image-modal-header">Viewing uploaded image</p>
        <button id="close-image-view-modal">&times;</button>
      </div>
      <img id="view-image-elem" alt="Loading..">
    </div>
  </div>


</body>
</html>